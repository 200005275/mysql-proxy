TESTING OVERVIEW
----------------

The normal test suite is under ./tests/suite/base
Run it with 

$ make check


Or if you want to run it manually, do

$ lua tests/run-tests.lua tests/suite/base

CREATING A NEW TEST SUITE
-------------------------

The Proxy test suite follows the same principles used by the server test suite.
There is a directory (usually ./t) containing .test scripts, with the 
instructions to run. And there is another directory (./r) containing the
expected results. For each .test file in ./t, there must be a corresponding 
.tesult file in ./r
For more information on the test framework, see the manual.
http://dev.mysql.com/doc/mysqltest/en/index.html

To run your test suite, create a directory under ./trunk/tests/suite, add two 
subdirectories /t and /r, and then use the above mentioned command.
For example:
 
$ mkdir tests/suite/myapp
$ mkdir tests/suite/myapp/t
$ mkdir tests/suite/myapp/r

# add test and result files under t and r

$ lua tests/run-tests.lua tests/suite/myapp

LIBRARY PATHS
-------------
The test suite uses the following paths to search for Lua libraries when 
a 'require' statement is issued. Each path is associated to an environment 
variable:

This directory contains Lua libraries
  variable       default                   description
  -------------- ------------------------- -----------------------
  LUA_LDIR       /usr/share/lua/5.1/?.lua  server wide Lua libraries
  LUA_PATH       /usr/local/share/?.lua    MySQL Proxy Lua libraries
  LUA_USER_PATH  ./trunk/lib/?.lua         user defined libraries

In addition to the above paths, the current suite is searched for
libraries as well. 
    suite_name ..  '/t/?.lua'  

TROUBLESHOOTING
---------------

If Lua complains about missing the lfs library, prepend the LUA_CPATH variable to the actual command:
$ LUA_CPATH='tests/.libs/?.so' lua tests/run-tests.lua tests/suite/base

If the test suite complains about access denied, perhaps you need to provide a password. 
The default user for the test suite is 'root', with no password.
If you want to run the tests with a different username and password, 
set the following environment variables
MYSQL_USER
MYSQL_PASSWORD

